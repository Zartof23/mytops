# Changelog Archive: 2025 Q4

> Entries from October - December 2025. For current changelog, see `docs/CHANGELOG.md`.

---

## [2025-12-28] Project Re-Architecture

### Context
Initial project concept used n8n as orchestrator and DynamoDB as database. Decision made to start fresh with a simpler, more integrated stack.

### Decisions Made

#### Backend Platform: Supabase
**Decision**: Use Supabase as unified backend (PostgreSQL + Auth + Edge Functions)

**Rationale**:
- All-in-one platform reduces complexity
- Built-in Row Level Security for data protection
- Native PostgreSQL with real-time subscriptions
- Edge Functions for serverless backend logic
- Integrated authentication with OAuth support
- MCP integration available for development

**Alternatives Considered**:
- n8n + DynamoDB (original) - Too complex for MVP, DynamoDB single-table design adds cognitive overhead
- Firebase - Less SQL-friendly, vendor lock-in concerns
- Self-hosted PostgreSQL + separate auth - More infrastructure to manage

---

#### Frontend Styling: Tailwind CSS + shadcn/ui
**Decision**: Use Tailwind CSS with shadcn/ui components

**Rationale**:
- Tailwind provides utility-first styling, fast iteration
- shadcn/ui is not a dependency - components are copied into project
- Built on Radix UI for accessibility
- Minimal aesthetic fits project personality
- Built-in dark/light mode support

**Alternatives Considered**:
- Material UI - Too opinionated, heavier bundle
- Chakra UI - Good but adds dependency
- Plain CSS - Too slow for rapid development

---

#### Authentication: Email + Google + GitHub
**Decision**: Support email/password registration plus Google and GitHub OAuth

**Rationale**:
- Email/password for users who prefer direct accounts
- Google covers majority of casual users
- GitHub appeals to developer audience (fits brand)
- Easy to add more providers later via Supabase

---

#### AI Provider: Claude (Anthropic)
**Decision**: Use Claude API for item enrichment

**Rationale**:
- Excellent at structured data extraction
- Consistent JSON output for database insertion
- Good context understanding for varied topics

---

#### Rating System: 5 Stars
**Decision**: Standard 1-5 star rating

**Rationale**:
- Universally understood
- Simple to implement
- Good granularity without being overwhelming

---

#### UI Personality: Self-Deprecating Developer Humor
**Decision**: Brand voice as "backend developer who reluctantly built a frontend"

**Rationale**:
- Unique and memorable
- Sets honest, no-BS expectations
- Appeals to developer audience
- Makes minimal design a feature, not a bug

**Example Copy**:
- "I'm a backend dev... I don't usually do frontend."
- "Yes, the registration form is just those fields. I don't need your data."
- "Something broke. Honestly, I'm surprised it worked this long."

---

#### Initial Topics
**Decision**: Seed with 6 topics for MVP

| Topic | Slug | Icon |
|-------|------|------|
| Movies | movies | üé¨ |
| Series | series | üì∫ |
| Books | books | üìö |
| Anime | anime | üéå |
| Games | games | üéÆ |
| Restaurants | restaurants | üçΩÔ∏è |

---

## [2025-12-29] Item Search Feature

### Feature: TopicDetailPage with Item Search

**What**: New page at `/topics/:slug` displaying topic details and allowing users to search for items within that topic.

**Implementation Details**:
- Topic header shows icon, name, and description
- Search input filters items by name (case-insensitive via Supabase `.ilike()`)
- Items displayed in responsive grid (2 cols mobile, 3 cols desktop)
- ItemCard shows name, truncated description, optional image, and source badge
- Source badges: Curated (blue), AI (purple), User (green)
- Empty states with personality copy
- Accessible: keyboard navigation on cards, screen reader labels

---

## [2025-12-29] Search Debouncing Optimization

### Optimization: Debounced Search Input

**Problem**: Every keystroke triggered a Supabase API call, causing unnecessary load and potential rate limiting.

**Solution**: Implemented debouncing - delays API call until 300ms after user stops typing.

**Implementation**:
- `useDebouncedValue<T>(value, delay)` hook using `useEffect` + `setTimeout`
- Cleanup function cancels pending timers on each keystroke
- 300ms delay (standard for search inputs)

---

## [2025-12-29] OAuth UI Improvements

### Feature: Enhanced OAuth Buttons & Error Handling

**What**: Improved OAuth login experience with provider icons, loading states, and error handling.

**Implementation**:
- Inline SVG icons for Google (colored) and GitHub (monochrome)
- Loading spinner when OAuth redirect is in progress
- Buttons disabled during any auth operation
- AuthCallback with error handling and timeout fallback

---

## [2025-12-29] Rating Component & Testing Infrastructure

### Feature: StarRating Component with Testing

**What**: Interactive 5-star rating component with full testing infrastructure.

**Implementation Details**:

**StarRating Component**:
- 5 clickable star buttons using lucide-react Star icon
- Hover preview effect
- Yellow fill for rated stars, muted for unrated
- Size variants: sm, md, lg
- Disabled/readOnly states
- Full keyboard accessibility

**Testing Infrastructure**:
- Vitest with jsdom environment
- React Testing Library for component tests
- Custom render wrapper with BrowserRouter
- Global test setup with Supabase mocks
- 42 tests total

---

## [2025-12-31] AuthCallback Session Fix

### Fix: OAuth Callback Infinite Loading

**Problem**: After successful OAuth login, the `/auth/callback` page would show infinite loading until timeout.

**Root Cause**: The `onAuthStateChange` listener was set up after the auth state had already changed.

**Solution**: Check for existing session immediately on component mount, in addition to listening for auth state changes.

**Test Count**: 50 total (was 42)

---

## [2025-12-31] UI/UX Rework with shadcn/ui

### Feature: Complete Frontend Design Refresh

**What**: Comprehensive UI/UX overhaul using shadcn/ui components with a monochrome color scheme.

**Design Principles**:
- Sharp & Minimal: Clean lines, no unnecessary decoration
- Monochrome: Black, white, and grays only (neutral palette)
- Dev Vibe: Self-deprecating humor in toast messages and copy
- Functional: Every element serves a purpose

**Configuration**:
- shadcn style: `new-york` (sharper, more minimal)
- Base color: `neutral` (monochrome)
- Path alias: `@/` maps to `src/`

**Toast Messages**:
| Event | Message |
|-------|---------|
| Rating saved | "Noted. Your taste is... interesting." |
| Rating failed | "Couldn't save that. The database is judging you." |
| Login success | "Welcome back. The database missed you." |
| Login failed | "Wrong credentials. Or maybe I broke something." |

**Build Size**: 496KB

---

## [2025-12-31] Code Quality & Route Guards

### Refactor: Route Protection & Code Quality Improvements

**What**: Comprehensive code quality audit and fixes including proper route guards, shared components, and memory leak fixes.

**Implementation**:
- `ProtectedRoute`: Redirects to `/login` if not authenticated
- `PublicOnlyRoute`: Redirects to `/` if already authenticated
- Extracted shared OAuth components
- ErrorBoundary with brand voice
- Auth subscription memory leak fix

**Test Count**: 50 (unchanged)
